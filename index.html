<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, Chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1,viewport-fit=cover">
    <title>CTList - /</title>
    <link href="//s.pstatp.com/cdn/expire-3-M/mdui/0.4.2/css/mdui.min.css" rel="stylesheet">
    <link href="//s.pstatp.com/cdn/expire-3-M/??video.js/7.3.0/video-js.min.css,baguettebox.js/1.11.0/baguetteBox.min.css" rel="stylesheet">
    <style>
    body{background-color:#f2f5fa}.nexmoe-item{margin:15px 0 !important;padding:15px !important;border-radius:5px;background-color:#fff;-webkit-box-shadow:0 .5em 3em rgba(161,177,204,.4);box-shadow:0 .5em 3em rgba(161,177,204,.4);background-color:#fff}.mdui-img-fluid,.mdui-video-fluid{border-radius:5px;border:1px solid #eee}.mdui-list{padding:0}.mdui-list-item{margin:0 !important;border-bottom:1px solid #eee;line-height:2}.mdui-list-item:last-child{margin-bottom:0 !important,}.mdui-toolbar{width:auto}.mdui-appbar .mdui-toolbar{height:56px;font-size:16px}.mdui-toolbar>*{padding:0 6px;margin:0 2px}.mdui-toolbar>.mdui-typo-headline{padding:0 16px 0 0}.mdui-toolbar>i{padding:0}.mdui-toolbar h3.title{padding:0 16px;line-height:30px;border-radius:30px;border:1px solid #eee;opacity:1;background-color:#1e89f2;color:#ffff}.mdui-toolbar>a:hover,a.mdui-typo-headline,a.active{opacity:1}.mdui-list>.th{background-color:initial}.mdui-list-item>a{width:100%;line-height:48px}.mdui-toolbar>a{padding:0 16px;line-height:30px;border-radius:30px;border:1px solid #eee}.mdui-toolbar>a:-child{opacity:1;background-color:#1e89f2;color:#ffff}@media screen and (max-width:980px){.mdui-list-item .mdui-text-right{display:none}.mdui-container{width:100% !important;margin:0}.mdui-toolbar>a:last-child,.mdui-toolbar>.mdui-typo-headline,.mdui-toolbar>i:first-child{display:block}}#main-page{cursor:pointer}.nav-a{text-decoration:none;color:#333}.nav-a:hover{text-decoration:underline}.file{width:100%;display:flex;align-items:center}.file a{color:unset;width:100%}#text-input,#close{display:none}#text-input{width:40%}#playerContainer{position:relative;background-color:#000;display:none;padding:10px}.close-icon{color:#fff}span.overlay{position:fixed;top:0;right:0;bottom:0;left:0;background-color:rgba(0,0,0,.8);z-index:999}.mask{display:block;-webkit-user-select:none;-ms-user-select:none;-webkit-transition:opacity .5s ease;transition:opacity .5s ease;background-color:rgba(0,0,0,.8);position:fixed;overflow:hidden;top:0;left:0;width:100%;height:100%}.video-js{width:100% !important;height:100% !important;position:relative !important}.vjs-big-play-button{margin-top:-130px !important}.video-js .vjs-text-track-display>div>div>div{font-size:24px !important;line-height:36px !important;padding:5px !important;background:transparent !important;text-shadow:1px 1px 2px #000;display:inline-block !important}.video-js .vjs-big-play-button{font-size:2.5em;line-height:2.5em;height:2.5em;width:2.5em;-webkit-border-radius:2.5em;-moz-border-radius:2.5em;border-radius:2.5em;background-color:#73859f;background-color:rgba(115,133,159,.5);border-width:.15em;margin-top:-1.25em !important;margin-left:-1.75em}.vjs-big-play-button .vjs-icon-placeholder{font-size:1.63em}.vjs-loading-spinner{font-size:2.5em;width:2em;height:2em;border-radius:1em;margin-top:-1em;margin-left:-1.5em}.vjs-paused .vjs-big-play-button,.vjs-paused.vjs-has-started .vjs-big-play-button{display:block}.video-js.vjs-playing .vjs-tech{pointer-events:auto}.video-js .vjs-time-control{display:block}.video-js .vjs-remaining-time{display:none}.player-title{color:#fff;float:left;font-size:1.2;line-height:24px}
    </style>
</head>
<body><div class="container mdui-container"><div class="mdui-container-fluid"><div class="mdui-toolbar nexmoe-item nav"><i class="mdui-list-item-icon mdui-icon material-icons mdui-text-color-blue" id="main-page" onclick="goto(rootPath)">home</i><span id="path">/</span><div class="mdui-toolbar-spacer"></div><input type="text" id="text-input" class="mdui-textfield-input" oninput="search(this)" placeholder="请输入关键字"><button type="button" id="close" class="mdui-textfield-close mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">close</i></button><button type="button" id="btn" class="mdui-textfield-icon mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">search</i></button></div></div><div class="mdui-container-fluid"><div class="list-wrapper nexmoe-item"><div class="list-header"><div class="file mdui-list-item th"><span class="name mdui-col-xs-12 mdui-col-sm-7" onclick="view('name')">列表</span><span class="time mdui-col-sm-3 mdui-text-right" onclick="view('date')">时间</span><span class="size mdui-col-sm-2 mdui-text-right" onclick="view('size')">大小</span></div></div><div id="file-list"></div></div></div></div>
<script src="//s.pstatp.com/cdn/expire-3-M/??mdui/0.4.0/js/mdui.min.js,video.js/7.3.0/video.min.js,video.js/7.3.0/lang/zh-CN.js,baguettebox.js/1.11.0/baguetteBox.min.js"></script>
<script>
"use strict";function goto(e){window.location.href=e}function sizeNum(e){var t=e.split(" ",2),a=0;switch(t[1]){case"B":a=Math.pow(2,0)*t[0];break;case"KB":a=Math.pow(2,10)*t[0];break;case"MB":a=Math.pow(2,20)*t[0];break;case"GB":a=Math.pow(2,30)*t[0];break;case"TB":a=Math.pow(2,40)*t[0];break;default:a=Math.pow(2,50)*t[0]}return a}function compare(e){return"size"===e?function(t,a){return sizeNum(t[e].toUpperCase())-sizeNum(a[e].toUpperCase())}:function(t,a){var i=t[e].toLowerCase(),r=a[e].toLowerCase();return i.localeCompare(r)}}function clear(){var e=new Array("file-wrapper"),t=void 0;for(var a in e)for(var i=document.getElementsByClassName(e[a]),r=i.length-1;r>=0;r--)i[r].parentNode.removeChild(i[r]);var n=document.getElementById("path"),o=document.createElement("span"),s=currentPath.trim().replace(/^\//,"").replace(/\/$/,""),l=new Array(""),d="";if(n.innerHTML.length>0&&(n.innerHTML=""),""!==s)for(var c=s.split("/"),p="",u=0;u<c.length;u++)p+="/"+c[u],0===u&&"/"!==rootPath||(d='<a class="nav-a" href="//'+window.location.host+p+'">'+c[u]+"</a>",l.push(d));o.innerHTML=l.join("/"),n.appendChild(o),t=0===n.innerHTML.length?"/":o.innerHTML.replace(/<[^>]+>/g,""),document.title+=t.substr(1),arrayPath=l}function search(e){var t=e.value;if(void 0!==t){t=t.toString().toLowerCase();for(var a=document.getElementsByClassName("file-wrapper"),i=0;i<a.length;i++){var r=a[i].children[0].querySelector("span.mdui-text-truncate").innerText;if(void 0!==r&&r.length>0){var n="";r.toLowerCase().indexOf(t)<0&&(n="none"),a[i].style.display=n}}}}function view(e){arrayFloder.sort(compare(e)),arrayFile.sort(compare(e)),reverse&&(arrayFloder.reverse(),arrayFile.reverse()),reverse=!reverse,clear();var t=document.getElementById("file-list"),a=arrayFloder.concat(arrayFile);for(var i in a)!function(e){var i=document.createElement("div"),r="folder"==a[e]["@type"]?"folder_open":"image_aspect_ratio",n=decodeURIComponent(a[e].name),o="https:"==document.location.protocol?"https:":"http:",s=o+"//"+domain+currentPath+"/"+n,l=getFileType(n);"image_aspect_ratio"==r&&(r=getFileIcon(l)),"image"===r&&t.setAttribute("class","gallery"),i.setAttribute("class","row file-wrapper mdui-list-item mdui-ripple"),i.innerHTML='\n        <div class="file">\n            <i class="mdui-icon material-icons">'+r+'</i>\n            <a href="'+s+'">\n                <span class="name mdui-col-xs-12 mdui-col-sm-7 mdui-text-truncate">'+n+'</span>\n                <span class="time mdui-col-sm-3 mdui-text-right">'+a[e].date+'</span>\n                <span class="size mdui-col-sm-2 mdui-text-right">'+(a[e].size?a[e].size:"0 B")+"</span>\n            </a>\n        </div>",t.appendChild(i),$$(i).find("i.mdui-icon.material-icons").on("click",function(e){e.preventDefault(),"video"==l&&playTo(i,s,n)},!1)}(i);baguetteBox.run(".gallery")}function playTo(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";$$("#playerContainer").remove();var i='\n      <div id="playerContainer" class="mdui-container-fluid">\n          <div align="right">\n            <span class="player-title">'+a+'</span>\n              <button type="button" id="closevideo" onclick="playerClose()" class="mdui-textfield-close mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons close-icon">close</i></button>\n          </div>\n          <video id="video" class="video-js vjs-fluid vjs-default-skin vjs-big-play-centered" controls oncontextmenu="return false;">\n              <track kind="captions" id="textTracks" srclang="zh-CN" label="字幕" default>\n          </video>\n      </div>';$$(e).after(i),player(t)}function getFileType(e){if(!e)return!1;var t=["gif","jpeg","jpg","bmp","png"],a=["avi","wmv","mkv","mp4","mov","3gp","flv","mpg","rmvb"],i=["txt","pdf","css","js","text","doc","docx","ppt","xml"],r=["wav","acc","flac","ape","ogg","mp3"];return RegExp(".("+t.join("|")+")$","i").test(e.toLowerCase())?"image":RegExp(".("+a.join("|")+")$","i").test(e.toLowerCase())?"video":RegExp(".("+i.join("|")+")$","i").test(e.toLowerCase())?"text":!!RegExp(".("+r.join("|")+")$","i").test(e.toLowerCase())&&"music"}function getFileIcon(e){var t=void 0;switch(e){case"image":t="image";break;case"video":t="ondemand_video";break;case"music":t="music_video";break;case"text":t="text_fields";break;default:t="insert_drive_file"}return t}function playerClose(){$$("#playerContainer").remove(),videojs("video").dispose(),$$("#playerContainer").hide(),$$("body").width()>980&&($$(".mdui-loaded").removeClass("mask"),$$(".list-header").show(),$$(".mdui-container-fluid:first-child").show(),$$(".file-wrapper").show())}function player(e){if($$("#playerContainer").show(),$$("body").width()>980){$$(".mdui-loaded").addClass("mask"),$$(".list-header").hide(),$$(".mdui-container-fluid:first-child").hide(),$$(".file-wrapper").hide();var t=void 0;t=window.outerHeight<820?"4.5vh":"6.5vh",$$(".mdui-loaded.mask").css({width:"82vw",position:"fixed",left:"10vw",top:t})}$$("video").attr("src",e);var a=e.substring(e.lastIndexOf(".")+1),i=e.substring(e,e.length-a.length)+"vtt";checkVtt(i)?$$("#textTracks").attr("src",i):$$("#textTracks").remove(),videojs("video",{html5:{hls:{overrideNative:!videojs.browser.IS_SAFARI}},sources:[{src:e}],fluid:!0,playbackRates:[.5,1,1.5,2]}).play()}function checkVtt(e){if(!e)return!1;var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(),4==t.readyState&&200==t.status}var domain=window.location.host,rootPath="{{.RootPath}}",currentPath="{{.CurrentPath}}",rawData="{{.RawData}}",title="CTList - ",$$=mdui.JQ;"/"===currentPath&&(currentPath="");var reverse=!1,pageData=JSON.parse(window.atob(rawData)),arrayPath=[],arrayFloder=[],arryVideo=[],arrayFile=[];for(var item in pageData)0!=item.indexOf("@")&&("video"==getFileType(decodeURIComponent(pageData[item].name))&&arryVideo.push(decodeURIComponent(pageData[item].name)),"file"==pageData[item]["@type"]?arrayFile.push(pageData[item]):"folder"==pageData[item]["@type"]&&arrayFloder.push(pageData[item]));$$("#btn").on("click",function(e){e.preventDefault(),$$("#text-input").show(),$$("#close").show(),$$("#btn").hide()}),$$("#close").on("click",function(e){e.preventDefault(),$$("#text-input").hide(),$$("#close").hide(),$$("#btn").show()}),window.onload=view("name");
</script></body></html>
